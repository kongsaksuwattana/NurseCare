<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:NurseCare.Model"
             x:Class="NurseCare.PatientPage"
             Title="PatientPage"
             Loaded="ContentPage_Loaded">
    <ContentPage.BindingContext>
        <local:LanguageViewModel x:Name="LangVM" />
    </ContentPage.BindingContext>
    <ScrollView>
        <Grid x:Name="MainGrid"
      Padding="20"
      RowSpacing="16"
      ColumnSpacing="24">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="OrientationStates">
                    <VisualState x:Name="Portrait">
                        <VisualState.Setters>
                            <Setter TargetName="MainGrid" Property="RowDefinitions">
                                <RowDefinitionCollection>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </RowDefinitionCollection>
                            </Setter>
                            <Setter TargetName="MainGrid" Property="ColumnDefinitions">
                                <ColumnDefinitionCollection>
                                    <ColumnDefinition Width="*"/>
                                </ColumnDefinitionCollection>
                            </Setter>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Landscape">
                        <VisualState.Setters>
                            <Setter TargetName="MainGrid" Property="RowDefinitions">
                                <RowDefinitionCollection>
                                    <RowDefinition Height="*"/>
                                </RowDefinitionCollection>
                            </Setter>
                            <Setter TargetName="MainGrid" Property="ColumnDefinitions">
                                <ColumnDefinitionCollection>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </ColumnDefinitionCollection>
                            </Setter>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>

            <!-- Patient Registration -->
            <Frame Grid.Row="0" Grid.Column="0"
           Margin="0"
           BorderColor="LightGray"
           CornerRadius="12"
           HasShadow="True">
                <Grid ColumnDefinitions="*,Auto" RowDefinitions="*,Auto">
                    <Label Grid.Column="0" Grid.Row="0" Text="{Binding PatientRegister}" FontSize="Medium"/>
                    <Image Grid.Column="1" Grid.Row="0" Source="patient_2.png" MaximumHeightRequest="80" HorizontalOptions="End"/>
                    <Grid Grid.Column="0" Grid.Row="0" VerticalOptions="End" HorizontalOptions="Start" >
                        <Button x:Name="RegisterVisible" Clicked="RegisterVisible_Clicked"
                                    Grid.Column="0" Text="Register" Padding="0" 
                                    Margin="0" HeightRequest="30" WidthRequest="80"/>
                    </Grid>
                    <VerticalStackLayout x:Name="PatientRegView" IsVisible="False"
                                         Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" 
                                         Padding="10" Spacing="6">

                        <Entry x:Name="PatientFirstName" Placeholder="{Binding FirstName}"/>
                        <Entry x:Name="PatientLastName" Placeholder="{Binding LastName}"/>
                        <HorizontalStackLayout>
                            <Entry x:Name="PatientHN" Placeholder="HN" WidthRequest="180"/>
                            <Picker x:Name="BedIdPicker" Title="{Binding BedNumber}"/>
                        </HorizontalStackLayout>
                        <Entry x:Name="PatientDisease" Placeholder="{Binding Disease}"/>
                        <HorizontalStackLayout>
                            <Label Text="{Binding DateofBirth}" VerticalTextAlignment="Center"/>
                            <DatePicker x:Name="PatientDOB" MinimumWidthRequest="200" Margin="10,0"/>
                        </HorizontalStackLayout>
                        <HorizontalStackLayout>
                            <Label Text="{Binding AdmissionDate}" VerticalTextAlignment="Center"/>
                            <DatePicker x:Name="PatientAdmissionDate" MinimumWidthRequest="200" Margin="10,0"/>
                        </HorizontalStackLayout>
                        <HorizontalStackLayout>
                            <CheckBox x:Name="IsDischargeCheck" Margin="0" WidthRequest="30" CheckedChanged="IsDischargeCheck_CheckedChanged"/>
                            <Label Text="{Binding DischargeDate}" VerticalTextAlignment="Center"/>
                            <DatePicker x:Name="PatientDischargeDate" MinimumWidthRequest="200" Margin="10,0" IsEnabled="False"/>
                        </HorizontalStackLayout>
                        <Entry x:Name="PatientContactPerson" Placeholder="{Binding ContactPerson}"/>
                        <Entry x:Name="PatientContactPhone" Placeholder="{Binding ContactPhone}" Keyboard="Telephone"/>
                        <Button Text="Register Patient" Clicked="OnRegisterPatientClicked"/>
                    </VerticalStackLayout>
                </Grid>
            </Frame>

            <!-- Nurse Registration -->
        <Frame Grid.Row="1" Grid.Column="0"
       Grid.RowSpan="1"
       BorderColor="LightGray"
       CornerRadius="12"
       HasShadow="True">
                <Grid x:Name="TurnBedridden"/>
                
            <!--<VerticalStackLayout Padding="16" Spacing="8">
                <Label Text="Nurse Registration" FontSize="Medium"/>
                <Entry x:Name="NurseFirstName" Placeholder="First Name"/>
                <Entry x:Name="NurseLastName" Placeholder="Last Name"/>
                <Entry x:Name="NurseEmployeeId" Placeholder="Employee ID"/>
                <DatePicker x:Name="NurseDateOfHire" />
                <Entry x:Name="NurseDepartment" Placeholder="Department"/>
                <Button Text="Register Nurse" Clicked="OnRegisterNurseClicked"/>
            </VerticalStackLayout>-->
        </Frame>
    </Grid>
    </ScrollView>
</ContentPage>